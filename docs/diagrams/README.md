# 審計系統設計圖

本目錄包含審計系統的各種設計圖，使用 PlantUML 繪製。這些圖表說明了系統的不同方面，從架構概覽到詳細的欄位結構。

## 圖表列表

1. **審計系統架構概覽** (audit-architecture.puml)
   - 展示審計系統的整體架構與主要組件
   - 說明標準審計與自定義審計的集成方式

2. **審計欄位處理流程** (audit-process.puml)
   - 詳細說明審計欄位從請求到持久化的完整流程
   - 展示標準審計與擴展審計的處理路徑

3. **審計類圖** (audit-entities.puml)
   - 展示審計相關的類和接口關係
   - 說明實體與審計接口的對應關係

4. **審計欄位關系圖** (audit-fields.puml)
   - 詳細展示各類審計欄位的分組和從屬關係
   - 說明不同實體使用的審計欄位組合

5. **審計元件交互圖** (audit-component.puml)
   - 說明審計系統各組件之間的交互關係
   - 展示系統的交互流程

## 如何查看這些圖表

您可以使用以下方法查看這些圖表：

1. **線上 PlantUML 查看器**
   - 訪問 [PlantUML Online Server](http://www.plantuml.com/plantuml/uml/)
   - 複製各圖表文件內容並貼上

2. **VS Code 擴展**
   - 安裝 PlantUML 擴展
   - 打開文件並按 Alt+D 預覽

3. **IntelliJ IDEA 插件**
   - 安裝 PlantUML Integration 插件
   - 打開文件並使用預覽功能

4. **導出為圖片**
   - 使用 PlantUML JAR 命令行：`java -jar plantuml.jar audit-architecture.puml`
   - 將生成 PNG 格式的圖片

## 圖表說明

### 審計系統架構概覽

此圖展示了整個審計系統的架構，包括：
- Spring Data JPA 提供的標準審計框架
- 自定義的審計接口與監聽器
- 用戶上下文處理機制
- 實體模型與審計接口的關係

### 審計欄位處理流程

此流程圖詳細展示了審計欄位處理的完整流程，從請求進入系統到數據最終持久化，包括：
- 標準審計欄位的處理路徑
- 擴展審計欄位的處理路徑
- 環境特殊業務操作的審計處理

### 審計類圖

此類圖說明系統中的類和接口關係，重點在於：
- 審計接口的繼承關係
- 實體與審計接口的實現關係
- 審計監聽器與審計接口的交互

### 審計欄位關系圖

此圖詳細展示了各類審計欄位的分組和關係，包括：
- 標準審計欄位與對應的註解
- 擴展審計欄位與其處理機制
- 各類實體使用的欄位組合

### 審計元件交互圖

此元件圖展示系統各組件之間的交互關係，包括：
- 控制器、實體與審計組件的調用關係
- 審計監聽器與上下文服務的交互
- 數據持久化流程